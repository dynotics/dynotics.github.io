---
import { Image } from "astro:assets";
import { projects } from "~/data/projects";
import Footer from "~/components/footer.astro";
import "~/styles/index.css";

export async function getStaticPaths() {
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
---
<!doctype html>
<html lang="en" class="h-full motion-safe:scroll-smooth" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{project.title} | Dylan T. Chin</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  </head>

  <body class="h-full overflow-x-hidden bg-default text-default text-base selection:bg-secondary selection:text-white">
    <main class="px-8 py-24 space-y-16">
      <a 
        href="/" 
        class="text-2xl bg-gradient-to-r from-[#c6e5ea] via-[#8ea8c1] to-[#6780ac] bg-clip-text text-transparent font-semibold"
        >
        ← Back to Home
    </a>

      <section class="grid md:grid-cols-2 gap-12 items-start">
        <!-- project cover -->
        <Image
          src={project.image}
          alt={project.title}
          class="shadow-lg w-full object-cover"
        />

        <!-- desc -->
        <div>
          <div class="flex items-center gap-3 mb-4">
            <h1 class="text-4xl font-extrabold bg-gradient-to-r from-[#c6e5ea] via-[#8ea8c1] to-[#6780ac] bg-clip-text text-transparent">
              {project.title}
            </h1>
            {project.icon && (
              <Image
                src={project.icon}
                alt=""
                class="w-16 h-16 object-contain"
              />
            )}
          </div>

          <p class="opacity-90">{project.description}</p>

          <h2 class="mt-8 text-2xl font-bold bg-gradient-to-r from-[#c6e5ea] via-[#8ea8c1] to-[#6780ac] bg-clip-text text-transparent">
            Credits
          </h2>
          <ul class="mt-4 space-y-1">
            {project.credits.map((c) => (
              <li>
                <strong>{c.name}</strong> — {c.role}
              </li>
            ))}
          </ul>

          {project.footageLink && (
            <a
              href={project.footageLink}
              target="_blank"
              class="mt-8 mr-4 inline-block px-6 py-3 text-white font-semibold transition"
              style="background-color: var(--color-secondary);"
              onmouseover="this.style.backgroundColor='var(--color-primary)';"
              onmouseout="this.style.backgroundColor='var(--color-secondary)';"
            >
              Watch Gameplay Footage
            </a>
          )}

          <a
            href={project.gameplayLink}
            target="_blank"
            class="mt-4 inline-block px-6 py-3 text-white font-semibold transition"
            style="background-color: var(--color-primary);"
            onmouseover="this.style.backgroundColor='var(--color-secondary)';"
            onmouseout="this.style.backgroundColor='var(--color-primary)';"
          >
            Play on Itch.io
          </a>
        </div>
      </section>
    </main>

    <Footer />
  </body>
</html>
